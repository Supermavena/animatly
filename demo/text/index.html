<!DOCTYPE html>
<html style="width: 100%;height: 100%">
<head>
     <script src="../../build/player/lottie.js"></script>
</head>

<body style="background-color:#ccc; margin: 0;height: 100%;">


<div style="display:inline;">Sample:</div>
<select id="sample_select" onchange="reload_animations()">
  <option value="basic.json" selected>Basic line and paragraph</option>
  <option value="rtl.json">RTL</option>
  <option value="bidi.json">BiDi</option>
  <option value="zalgo.json">Scary looking zalgo text</option>
  <option value="animation-1.json">Animation 1</option>
  <option value="animation-2.json">Animation 2</option>
  <option value="animation-3.json">Animation 3</option>
  <option value="animation-4.json">Animation 4</option>
  <option value="animation-5.json">Animation 5</option>
  <option value="animation-6.json">Animation 6</option>
  <option value="banner.json">Banner</option>
</select>
<br>

<div style="display:inline-block; text-align:center;">
 <div style="width:1024px;height:1024px;background-color:#333;display:inline-block;" id="lottie1"></div>
 <br>
 Lottie
</div>
<div style="display:inline-block; text-align:center;">
  <div style="width:1024px;height:1024px;background-color:#333;display:inline-block;" id="lottie2"></div>
  <br>
  Skript
</div>

<script>
  const sample_select = document.getElementById('sample_select');
  const shaper_select = document.getElementById('shaper_select');
  const url_params = new URLSearchParams(window.location.search);
  const sample = (new URLSearchParams(window.location.search)).get('sample');
  let current_animation;

  if (sample) {
    sample_select.value = sample;
  }

  bodymovin.setSubframeRendering(false);

  function load_animation(path, container, useSkript) {
    return bodymovin.loadAnimation({
      path: path,
      wrapper: container,
      animType: 'svg',
      loop: true,
      prerender: true,
      autoplay: true,
      rendererSettings: {
        useSkriptShaping: useSkript,
      },
    });
  }

  let active_animations = [];

  function reload_animations() {
    for (anim of active_animations) {
      anim.destroy();
    }
    active_animations = [
      load_animation(sample_select.value, document.getElementById('lottie1'), false),
      load_animation(sample_select.value, document.getElementById('lottie2'), true),
    ];
  }

  reload_animations();
</script>
</body>
</html>
