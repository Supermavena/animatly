<!DOCTYPE html>
<html style="width: 100%;height: 100%">
<head>
     <script src="../../build/player/lottie.js"></script>
</head>

<body style="background-color:#ccc; margin: 0;height: 100%;">

<div style="width:1024px;height:1024px;background-color:#333;position: absolute;left:0;right:0;top:0;bottom:0;margin:auto" id="lottie"></div>

<div style="display:inline;">Sample:</div>
<select id="sample_select" onchange="reload_animation()">
  <option value="basic.json" selected>Basic line and paragraph</option>
  <option value="rtl.json">RTL</option>
  <option value="bidi.json">BiDi</option>
  <option value="zalgo.json">Scary looking zalgo text</option>
  <option value="animation-1.json">Animation 1</option>
  <option value="animation-2.json">Animation 2</option>
  <option value="animation-3.json">Animation 3</option>
  <option value="animation-4.json">Animation 4</option>
  <option value="banner.json">Banner</option>
</select>
<br>

<div style="display:inline;">Shaper:</div>
<select id="shaper_select" onchange="reload_animation()">
  <option value="lottie">Lottie</option>
  <option value="skia">Skript</option>
</select>

<script>
  const sample_select = document.getElementById('sample_select');
  const shaper_select = document.getElementById('shaper_select');
  const url_params = new URLSearchParams(window.location.search);
  const sample = (new URLSearchParams(window.location.search)).get('sample');
  let current_animation;

  if (sample) {
    sample_select.value = sample;
  }

  bodymovin.setSubframeRendering(false);

  let anim_data = {
    wrapper: document.getElementById('lottie'),
    animType: 'svg',
    loop: true,
    prerender: true,
    autoplay: true
  };

  function reload_animation() {
    if (current_animation) {
      current_animation.destroy();
    }

    anim_data.path = sample_select.value;
    current_animation = bodymovin.loadAnimation(anim_data);

    window.setSkia = shaper_select.value === 'skia' ? 1 : 0;
  }

  reload_animation();
</script>
</body>
</html>
